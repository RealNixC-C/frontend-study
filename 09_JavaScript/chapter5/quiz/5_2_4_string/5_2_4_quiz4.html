<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <input type="file">
  <!-- <input type="file" multiple> -->

  <script>
    // 문제4
    // 사용자가 파일을 첨부하면
    // 문자열 객체를 이용하여 파일 확장자를 추출한 뒤 fileExt 변수에 저장하고,
    // 이미지 파일(jpg, png, gif)이 맞는지 검사하여
    // 아닐 경우에만 alert() 창을 띄워 경고하기.
    // (아래 샘플 코드의 주석을 해제하고 이어서 풀면 됩니다.)

    // 샘플 코드
    const imgFileExt = ['jpg', 'png', 'gif'];
    const fileInput = document.querySelector('input[type="file"]');

    // 첨부된 파일에 변화가 감지되었을때 'change' 이벤트 발생
    fileInput.addEventListener('change', function () {
      // debugger;
      console.log(fileInput); // file input DOM 요소
      console.log(fileInput.files); // FileList 객체
      console.log(fileInput.files[0]); // File 객체

      // 풀이4
      const fileName = fileInput.files[0].name;
      console.log(fileName);
      const fileIndex = Number(fileName.lastIndexOf('.')) + 1;
      console.log(fileIndex);
      const fileExt = fileName.slice(fileIndex)
      console.log(fileExt);
      
      if (!fileExt === 'jpg' || !fileExt === 'png' || !fileExt === 'gif') {
        alert('이미지 파일이 아닙니다.');
        this.value = '';
      }
      


      // if (!fileExt === 'jpg' || !fileExt === 'png' || !fileExt === 'gif') {
      //   alert('이미지 파일이 아닙니다.');
      // }
      // if (!(fileExt === 'jpg' || fileExt === 'png' || fileExt === 'gif')) {
      //   alert('이미지 파일이 아닙니다!');
      //   this.value = ''; // 파일 선택 초기화
      // }
      // 위 조건문의 차이.
      // 첫 번째 if문의 조건식에 !fileExt부분은 논리 부정연산자 즉 true/false값을 지니게 됨
      // truthy와 falsy값은 문자열과 비교할 수 없음
      // fileExt의 값으로는 "jpg","png","gif" 같은 확장자명 문자열이므로
      // !truthy(false)의 값을 지님 즉 항상 false값을 갖고있기에 잘못된 식

      // 두 번째 식
      // !논리부정연산자 뒤에있는 괄호 ()식을 논리연산자 === || 를 통해 비교후
      // || 이기때문에 하나의 조건식이라도 만족하게 될 경우 true값을 반환 
      // 이후 부정연산자를 통해 true값 혹은 false값을 반대로 바꿈
      
      
















      // 풀이4 (선생님 풀이)
      // 하드 코딩 = 관리 불편
      // if (!(fileExt === 'jpg' || 
      //     fileExt === 'png' ||
      //     fileExt === 'gif')) {
      //   alert('이미지 파일이 아닙니다!');
      //   this.value = ''; // 파일 선택 초기화
      // }

      // 배열로 관리하면 편함!
      // if (!imgFileExt.includes(fileExt)) {
      //   alert('이미지 파일이 아닙니다!');
      //   this.value = ''; // 파일 선택 초기화
      // }

    });
  </script>
</body>
</html>